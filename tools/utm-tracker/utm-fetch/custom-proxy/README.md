# æ–¹æ¡ˆ Bï¼šè‡ªå»ºä¸­é—´è·³è½¬å®¡è®¡ (Custom Proxy)

> **å®šä½**ï¼šè¿›é˜¶æ–¹æ¡ˆã€‚è§£å†³ GitHub åŸç”Ÿåˆ†ææ— æ³•è¯†åˆ« `utm_campaign` çš„ç—›ç‚¹ï¼Œå®ç°ç²¾ç¡®çš„ä»»åŠ¡çº§è½¬åŒ–ç‡ç»Ÿè®¡ã€‚  
> æ–¹æ¡ˆ A åªèƒ½çœ‹åˆ°â€œæ¥è‡ªçŸ¥ä¹â€ï¼Œä½†æ— æ³•åŒºåˆ†æ˜¯â€œçŸ¥ä¹æ–‡ç«  Aâ€è¿˜æ˜¯â€œçŸ¥ä¹å›ç­” Bâ€å¼•æµã€‚  
> æ–¹æ¡ˆ B é€šè¿‡**ä¸­é—´è·³è½¬å±‚**ï¼Œåœ¨ç”¨æˆ·åˆ°è¾¾ GitHub ä¹‹å‰æ‹¦æˆªå¹¶è®°å½•å®Œæ•´çš„ UTM å‚æ•°ï¼Œå®ç°ç²¾ç¡®åˆ°å…·ä½“ä»»åŠ¡ï¼ˆCampaignï¼‰çš„æ•°æ®å®¡è®¡ã€‚  
> è¿™é‡Œé‡‡ç”¨ç›®å‰ä¸šç•Œæœ€è½»é‡ä¸”å…è´¹çš„å®ç°æ–¹æ¡ˆï¼š**Cloudflare Workers + KV å­˜å‚¨**ï¼ˆæˆ–ç®€å•æ—¥å¿—è¾“å‡ºï¼‰ã€‚  

---

## ğŸ“– å®ç°åŸç†
é€šè¿‡è‡ªå»ºä¸€ä¸ªå¾®å‹è·³è½¬æœåŠ¡ï¼ˆå¦‚ `link.yourdomain.com`ï¼‰ï¼Œåœ¨ç”¨æˆ·è®¿é—®æ—¶ï¼š
1. **æ‹¦æˆª**ï¼šè§£æ URL ä¸­çš„ `utm_source` å’Œ `utm_campaign`ã€‚
2. **å­˜è¯**ï¼šå°†ç‚¹å‡»è¡Œä¸ºå®æ—¶è®°å½•åˆ°äº‘ç«¯æ—¥å¿—æˆ–æ•°æ®åº“ï¼ˆå¦‚ Supabase / Cloudflare KVï¼‰ã€‚
3. **åˆ†å‘**ï¼šå®Œæˆè®°å½•åï¼Œç¬é—´ 302 é‡å®šå‘è‡³æœ€ç»ˆçš„ç›®æ ‡é¡µé¢ï¼ˆGitHub/Docsï¼‰ã€‚

## ğŸ› ï¸ éƒ¨ç½²æŒ‡å— (Cloudflare Workers ç‰ˆ)
1. **åˆ›å»º Worker**ï¼šåœ¨ Cloudflare åå°æ–°å»ºä¸€ä¸ª Workerã€‚
2. **ç²˜è´´ä»£ç **ï¼šå°†æœ¬ç›®å½•ä¸‹çš„ `worker.js` å†…å®¹å¤åˆ¶è¿›å»ã€‚
3. **ç»‘å®šåŸŸå**ï¼šé…ç½®ä¸€ä¸ªæ˜“äºä¼ æ’­çš„çŸ­åŸŸåï¼ˆå¦‚ `go.upstream.com`ï¼‰ã€‚

## ğŸ“ è¥å‘˜ä½¿ç”¨è§„èŒƒ
å°ç™½è¥å‘˜åœ¨ä½¿ç”¨ `utm_gen.py` æ—¶ï¼Œåº”å°†ç”Ÿæˆçš„é“¾æ¥æ›¿æ¢ä¸ºä»£ç†æ ¼å¼ï¼š
`https://go.upstream.com/?utm_source=v2ex&utm_campaign=makepad&target=https%3A%2F%2Fgithub.com%2F...`

## ğŸ“Š æ•°æ®å›æ”¶
- **æ–¹å¼**ï¼šå®šæœŸå¯¼å‡º Cloudflare Logs æˆ–å…³è”çš„æ•°æ®åº“è®°å½•ã€‚
- **é—­ç¯**ï¼šåˆ©ç”¨æ•°æ®è®¡ç®—ä¸åŒ Campaign çš„ ROIï¼Œå†™å…¥ `report/`ã€‚

---
*Upstream Logbook | Powered by Upstream Labs*

